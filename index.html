<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Municipality Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --info: #17a2b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark);
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: var(--primary);
            color: white;
            padding: 20px 0;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--secondary);
        }
        
        .logo h1 {
            font-size: 1.8rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        nav a:hover, nav a.active {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        .user-actions {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-secondary {
            background: var(--accent);
            color: white;
        }
        
        .btn-secondary:hover {
            background: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background: #e67e22;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-info {
            background: var(--info);
            color: white;
        }
        
        .btn-info:hover {
            background: #138496;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-danger {
            background: var(--accent);
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: none;
            position: relative;
            overflow: hidden;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .service-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            border-left: 4px solid var(--secondary);
            position: relative;
            overflow: hidden;
        }
        
        .service-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .service-icon {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .service-card:hover .service-icon {
            transform: scale(1.2) rotate(5deg);
            color: var(--accent);
        }
        
        .service-details {
            margin-top: 15px;
            text-align: left;
            font-size: 0.9rem;
            color: #666;
            display: none;
        }
        
        .service-card.active .service-details {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .service-features {
            list-style: none;
            margin-top: 10px;
        }
        
        .service-features li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .service-features li:last-child {
            border-bottom: none;
        }
        
        .service-action {
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
        }
        
        label {
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input, select, textarea {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
            outline: none;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .admin-panel {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }
        
        .admin-sidebar {
            background: var(--primary);
            color: white;
            border-radius: 10px;
            padding: 20px;
        }
        
        .admin-sidebar ul {
            list-style: none;
        }
        
        .admin-sidebar li {
            margin-bottom: 10px;
        }
        
        .admin-sidebar a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-sidebar a:hover, .admin-sidebar a.active {
            background: var(--secondary);
            transform: translateX(5px);
        }
        
        .admin-content {
            background: white;
            border-radius: 10px;
            padding: 20px;
        }
        
        .admin-tab {
            display: none;
        }
        
        .admin-tab.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .admin-stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            border-top: 4px solid var(--secondary);
            transition: all 0.3s;
        }
        
        .admin-stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .admin-stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .admin-stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        tr {
            transition: all 0.3s;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .action-buttons {
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .edit-btn {
            background: var(--warning);
            color: white;
        }
        
        .edit-btn:hover {
            background: #e67e22;
            transform: scale(1.05);
        }
        
        .delete-btn {
            background: var(--accent);
            color: white;
        }
        
        .delete-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }
        
        .view-btn {
            background: var(--info);
            color: white;
        }
        
        .view-btn:hover {
            background: #138496;
            transform: scale(1.05);
        }
        
        .resolve-btn {
            background: var(--success);
            color: white;
        }
        
        .resolve-btn:hover {
            background: #27ae60;
            transform: scale(1.05);
        }
        
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .chatbot-toggle:hover {
            transform: scale(1.1) rotate(10deg);
            background: var(--accent);
        }
        
        .chatbot-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 400px;
            height: 500px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .chatbot-header {
            background: var(--primary);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chatbot-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .message {
            padding: 10px 15px;
            border-radius: 18px;
            max-width: 80%;
            line-height: 1.4;
            animation: messageAppear 0.3s ease;
        }
        
        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .bot-message {
            background: #f1f1f1;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            background: var(--secondary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .quick-reply {
            background: #e0e0e0;
            border: none;
            border-radius: 15px;
            padding: 5px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quick-reply:hover {
            background: #d0d0d0;
        }
        
        .chatbot-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #eee;
        }
        
        .chatbot-input input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 10px 15px;
            margin-right: 10px;
        }
        
        .chatbot-input button {
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .chatbot-input button:hover {
            background: var(--accent);
            transform: rotate(15deg);
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            border-top: 4px solid var(--secondary);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .stat-label {
            color: #7f8c8d;
            fontSize: 0.9rem;
        }
        
        .floating-animation {
            position: absolute;
            width: 50px;
            height: 50px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }
        
        .floating-animation:nth-child(2) {
            width: 30px;
            height: 30px;
            background: rgba(231, 76, 60, 0.1);
            animation-delay: 1s;
            top: 20%;
            left: 10%;
        }
        
        .floating-animation:nth-child(3) {
            width: 40px;
            height: 40px;
            background: rgba(46, 204, 113, 0.1);
            animation-delay: 2s;
            top: 60%;
            left: 80%;
        }
        
        .floating-animation:nth-child(4) {
            width: 25px;
            height: 25px;
            background: rgba(243, 156, 18, 0.1);
            animation-delay: 3s;
            top: 80%;
            left: 20%;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: #7f8c8d;
            border-top: 1px solid #eee;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: slideInRight 0.3s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-success {
            background: var(--success);
        }
        
        .notification-error {
            background: var(--accent);
        }
        
        .notification-info {
            background: var(--info);
        }
        
        .service-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .service-modal-content {
            background: white;
            border-radius: 10px;
            padding: 25px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalAppear 0.3s ease;
        }
        
        @keyframes modalAppear {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .service-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .service-form {
            display: grid;
            gap: 15px;
        }
        
        .admin-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .document-upload {
            border: 2px dashed #ddd;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .document-upload:hover {
            border-color: var(--secondary);
            background: #f8f9fa;
        }
        
        .document-preview {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .document-item {
            position: relative;
            width: 120px;
            height: 120px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .document-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .document-item .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(231, 76, 60, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .payment-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .payment-options {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .payment-option {
            flex: 1;
            min-width: 150px;
            border: 2px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-option:hover, .payment-option.selected {
            border-color: var(--secondary);
            background: white;
        }
        
        .payment-option i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .payment-form {
            margin-top: 20px;
            display: none;
        }
        
        .payment-form.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .chatbot-window {
                width: 300px;
                height: 400px;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .service-action {
                flex-direction: column;
                gap: 10px;
            }
            
            .user-actions {
                flex-direction: column;
                width: 100%;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .admin-panel {
                grid-template-columns: 1fr;
            }
            
            .admin-sidebar {
                order: 2;
            }
            
            .admin-content {
                order: 1;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .section {
                padding: 15px;
            }
            
            .chatbot-window {
                width: 280px;
                right: 10px;
            }
            
            .stats-cards, .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .admin-controls {
                flex-direction: column;
            }
            
            .payment-options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="floating-animation"></div>
            <div class="floating-animation"></div>
            <div class="floating-animation"></div>
            <div class="floating-animation"></div>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-city"></i>
                    <h1>Municipality Services</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="nav-link active" data-section="home"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#" class="nav-link" data-section="services"><i class="fas fa-concierge-bell"></i> Services</a></li>
                        <li><a href="#" class="nav-link" data-section="applications"><i class="fas fa-file-alt"></i> My Applications</a></li>
                        <li><a href="#" class="nav-link" data-section="admin"><i class="fas fa-user-shield"></i> Admin</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <button class="btn btn-primary" id="loginBtn"><i class="fas fa-sign-in-alt"></i> Login</button>
                </div>
            </div>
        </header>

        <!-- Home Section -->
        <section id="home" class="section active">
            <h2 class="section-title"><i class="fas fa-home"></i> Welcome to Municipality Services</h2>
            <div class="stats-cards">
                <div class="stat-card">
                    <i class="fas fa-file-alt stat-icon"></i>
                    <div class="stat-number" id="total-applications">0</div>
                    <div class="stat-label">Total Applications</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-check-circle stat-icon"></i>
                    <div class="stat-number" id="approved-applications">0</div>
                    <div class="stat-label">Approved Applications</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-users stat-icon"></i>
                    <div class="stat-number" id="active-users">0</div>
                    <div class="stat-label">Active Users</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-clock stat-icon"></i>
                    <div class="stat-number" id="avg-processing">0</div>
                    <div class="stat-label">Avg. Processing (Days)</div>
                </div>
            </div>
            <div class="services-grid">
                <div class="service-card" data-service="license-apply">
                    <i class="fas fa-id-card service-icon"></i>
                    <h3>License Apply</h3>
                    <p>Apply for new licenses and permits</p>
                    <div class="service-details">
                        <p>Required documents:</p>
                        <ul class="service-features">
                            <li>Proof of identity</li>
                            <li>Proof of address</li>
                            <li>Passport size photographs</li>
                            <li>Application form</li>
                        </ul>
                        <p>Processing time: 7-10 business days</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="License Application">Apply Now</button>
                            <button class="btn btn-primary btn-info" data-service="License Application">More Info</button>
                        </div>
                    </div>
                </div>
                <div class="service-card" data-service="license-renewal">
                    <i class="fas fa-sync-alt service-icon"></i>
                    <h3>License Renewal</h3>
                    <p>Renew your existing licenses</p>
                    <div class="service-details">
                        <p>Required documents:</p>
                        <ul class="service-features">
                            <li>Existing license copy</li>
                            <li>Updated address proof (if changed)</li>
                            <li>Renewal application form</li>
                        </ul>
                        <p>Processing time: 3-5 business days</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="License Renewal">Renew Now</button>
                            <button class="btn btn-primary btn-info" data-service="License Renewal">More Info</button>
                        </div>
                    </div>
                </div>
                <div class="service-card" data-service="property-tax">
                    <i class="fas fa-home service-icon"></i>
                    <h3>Property Tax</h3>
                    <p>Pay property tax online</p>
                    <div class="service-details">
                        <p>Payment methods:</p>
                        <ul class="service-features">
                            <li>Credit/Debit Card</li>
                            <li>Net Banking</li>
                            <li>UPI Payment</li>
                            <li>Wallet Payment</li>
                        </ul>
                        <p>Due date: 31st March each year</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="Property Tax">Pay Now</button>
                            <button class="btn btn-primary btn-info" data-service="Property Tax">More Info</button>
                        </div>
                    </div>
                </div>
                <div class="service-card" data-service="vehicle-registration">
                    <i class="fas fa-car service-icon"></i>
                    <h3>Vehicle Registration</h3>
                    <p>New vehicle registration and transfers</p>
                    <div class="service-details">
                        <p>Required documents:</p>
                        <ul class="service-features">
                            <li>Address proof</li>
                            <li>ID proof</li>
                            <li>Vehicle invoice</li>
                            <li>Insurance certificate</li>
                            <li>Pollution certificate</li>
                        </ul>
                        <p>Processing time: 1-2 business days</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="Vehicle Registration">Apply Now</button>
                            <button class="btn btn-primary btn-info" data-service="Vehicle Registration">More Info</button>
                        </div>
                    </div>
                </div>
                <div class="service-card" data-service="trade-license">
                    <i class="fas fa-store service-icon"></i>
                    <h3>Trade License</h3>
                    <p>Obtain license for business operations</p>
                    <div class="service-details">
                        <p>Required documents:</p>
                        <ul class="service-features">
                            <li>Address proof of business</li>
                            <li>ID proof of applicant</li>
                            <li>Property tax receipt</li>
                            <li>NOC from landlord (if rented)</li>
                            <li>Business incorporation documents</li>
                        </ul>
                        <p>Processing time: 7-10 business days</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="Trade License">Apply Now</button>
                            <button class="btn btn-primary btn-info" data-service="Trade License">More Info</button>
                        </div>
                    </div>
                </div>
                <div class="service-card" data-service="building-permit">
                    <i class="fas fa-hard-hat service-icon"></i>
                    <h3>Building Permit</h3>
                    <p>Apply for construction and renovation permits</p>
                    <div class="service-details">
                        <p>Required documents:</p>
                        <ul class="service-features">
                            <li>Land ownership documents</li>
                            <li>Building plans</li>
                            <li>Structural stability certificate</li>
                            <li>NOC from fire department</li>
                            <li>Application form</li>
                        </ul>
                        <p>Processing time: 15-30 business days</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="Building Permit">Apply Now</button>
                            <button class="btn btn-primary btn-info" data-service="Building Permit">More Info</button>
                        </div>
                    </div>
                </div>
                <div class="service-card" data-service="death-certificate">
                    <i class="fas fa-file-medical service-icon"></i>
                    <h3>Death Certificate</h3>
                    <p>Register death and obtain death certificate</p>
                    <div class="service-details">
                        <p>Required documents:</p>
                        <ul class="service-features">
                            <li>Medical certificate of cause of death</li>
                            <li>Deceased's ID proof</li>
                            <li>Applicant's ID proof</li>
                            <li>Death registration form</li>
                        </ul>
                        <p>Processing time: 2-4 business days</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="Death Certificate">Apply Now</button>
                            <button class="btn btn-primary btn-info" data-service="Death Certificate">More Info</button>
                        </div>
                    </div>
                </div>
                <div class="service-card" data-service="birth-certificate">
                    <i class="fas fa-baby service-icon"></i>
                    <h3>Birth Certificate</h3>
                    <p>Apply for birth certificate registration</p>
                    <div class="service-details">
                        <p>Required documents:</p>
                        <ul class="service-features">
                            <li>Hospital birth record</li>
                            <li>Parent's ID proof</li>
                            <li>Address proof</li>
                            <li>Application form</li>
                        </ul>
                        <p>Processing time: 3-5 business days</p>
                        <div class="service-action">
                            <button class="btn btn-info btn-apply" data-service="Birth Certificate">Apply Now</button>
                            <button class="btn btn-primary btn-info" data-service="Birth Certificate">More Info</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="section">
            <h2 class="section-title"><i class="fas fa-concierge-bell"></i> Municipality Services</h2>
            <div class="services-grid">
                <!-- Service cards are the same as in home section -->
            </div>
        </section>

        <!-- My Applications Section -->
        <section id="applications" class="section">
            <h2 class="section-title"><i class="fas fa-file-alt"></i> My Applications</h2>
            <div id="applicationsList">
                <!-- Applications will be dynamically added here -->
            </div>
        </section>

        <!-- Admin Panel Section -->
        <section id="admin" class="section">
            <h2 class="section-title"><i class="fas fa-user-shield"></i> Admin Control Panel</h2>
            <div class="admin-panel">
                <div class="admin-sidebar">
                    <ul>
                        <li><a href="#" class="admin-nav active" data-tab="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#" class="admin-nav" data-tab="applications"><i class="fas fa-list-alt"></i> Manage Applications</a></li>
                        <li><a href="#" class="admin-nav" data-tab="users"><i class="fas fa-users"></i> User Management</a></li>
                        <li><a href="#" class="admin-nav" data-tab="reports"><i class="fas fa-chart-bar"></i> Reports & Analytics</a></li>
                        <li><a href="#" class="admin-nav" data-tab="settings"><i class="fas fa-cogs"></i> System Settings</a></li>
                    </ul>
                </div>
                <div class="admin-content">
                    <!-- Admin Dashboard -->
                    <div id="admin-dashboard" class="admin-tab active">
                        <h3>Admin Dashboard</h3>
                        <div class="admin-stats">
                            <div class="admin-stat-card">
                                <i class="fas fa-file-alt"></i>
                                <div class="admin-stat-number" id="admin-total-applications">0</div>
                                <div class="admin-stat-label">Total Applications</div>
                            </div>
                            <div class="admin-stat-card">
                                <i class="fas fa-check-circle"></i>
                                <div class="admin-stat-number" id="admin-approved-applications">0</div>
                                <div class="admin-stat-label">Approved Applications</div>
                            </div>
                            <div class="admin-stat-card">
                                <i class="fas fa-clock"></i>
                                <div class="admin-stat-number" id="admin-pending-applications">0</div>
                                <div class="admin-stat-label">Pending Applications</div>
                            </div>
                            <div class="admin-stat-card">
                                <i class="fas fa-users"></i>
                                <div class="admin-stat-number" id="admin-total-users">0</div>
                                <div class="admin-stat-label">Registered Users</div>
                            </div>
                            <div class="admin-stat-card">
                                <i class="fas fa-money-bill-wave"></i>
                                <div class="admin-stat-number" id="admin-revenue">â‚¹0</div>
                                <div class="admin-stat-label">Total Revenue</div>
                            </div>
                            <div class="admin-stat-card">
                                <i class="fas fa-chart-line"></i>
                                <div class="admin-stat-number" id="admin-approval-rate">0%</div>
                                <div class="admin-stat-label">Approval Rate</div>
                            </div>
                        </div>
                    </div>

                    <!-- Manage Applications -->
                    <div id="admin-applications" class="admin-tab">
                        <h3>Manage Applications</h3>
                        <div class="admin-controls">
                            <button class="btn btn-primary" id="refreshApplications"><i class="fas fa-sync-alt"></i> Refresh</button>
                            <button class="btn btn-success" id="exportApplications"><i class="fas fa-file-export"></i> Export</button>
                            <button class="btn btn-info" id="filterApplications"><i class="fas fa-filter"></i> Filter</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Application ID</th>
                                    <th>User</th>
                                    <th>Service</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adminApplicationsTable">
                                <!-- Applications will be dynamically added here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- User Management -->
                    <div id="admin-users" class="admin-tab">
                        <h3>User Management</h3>
                        <div class="admin-controls">
                            <button class="btn btn-primary" id="refreshUsers"><i class="fas fa-sync-alt"></i> Refresh</button>
                            <button class="btn btn-success" id="addUser"><i class="fas fa-user-plus"></i> Add User</button>
                            <button class="btn btn-info" id="exportUsers"><i class="fas fa-file-export"></i> Export</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>User ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Applications</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adminUsersTable">
                                <!-- Users will be dynamically added here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Reports & Analytics -->
                    <div id="admin-reports" class="admin-tab">
                        <h3>Reports & Analytics</h3>
                        <div class="admin-controls">
                            <button class="btn btn-primary" id="generateReport"><i class="fas fa-chart-pie"></i> Generate Report</button>
                            <button class="btn btn-success" id="downloadReport"><i class="fas fa-download"></i> Download Report</button>
                        </div>
                        <div class="admin-stats" style="margin-top: 20px;">
                            <div class="admin-stat-card">
                                <i class="fas fa-chart-bar"></i>
                                <div class="admin-stat-number" id="report-applications-by-service">0</div>
                                <div class="admin-stat-label">Service Types</div>
                            </div>
                            <div class="admin-stat-card">
                                <i class="fas fa-calendar"></i>
                                <div class="admin-stat-number" id="report-this-month">0</div>
                                <div class="admin-stat-label">This Month</div>
                            </div>
                            <div class="admin-stat-card">
                                <i class="fas fa-tachometer-alt"></i>
                                <div class="admin-stat-number" id="report-avg-processing">0</div>
                                <div class="admin-stat-label">Avg. Processing Days</div>
                            </div>
                        </div>
                    </div>

                    <!-- System Settings -->
                    <div id="admin-settings" class="admin-tab">
                        <h3>System Settings</h3>
                        <form id="adminSettingsForm" class="service-form">
                            <div class="form-group">
                                <label for="systemName"><i class="fas fa-cog"></i> System Name</label>
                                <input type="text" id="systemName" value="Municipality Services" required>
                            </div>
                            <div class="form-group">
                                <label for="adminEmail"><i class="fas fa-envelope"></i> Admin Email</label>
                                <input type="email" id="adminEmail" value="admin@municipality.gov" required>
                            </div>
                            <div class="form-group">
                                <label for="helpline"><i class="fas fa-phone"></i> Helpline Number</label>
                                <input type="text" id="helpline" value="1800-123-4567" required>
                            </div>
                            <div class="form-group">
                                <label for="autoResponse"><i class="fas fa-robot"></i> Auto-Response Message</label>
                                <textarea id="autoResponse" required>Thank you for your application. We have received it and will process it shortly.</textarea>
                            </div>
                            <div class="form-group">
                                <label for="applicationTimeout"><i class="fas fa-clock"></i> Application Processing Time (Days)</label>
                                <input type="number" id="applicationTimeout" value="7" min="1" max="30" required>
                            </div>
                            <button type="submit" class="btn btn-primary" id="saveSettings"><i class="fas fa-save"></i> Save Settings</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Service Application Modal -->
        <div class="service-modal" id="serviceModal">
            <div class="service-modal-content">
                <div class="service-modal-header">
                    <h3 id="modalServiceTitle">Apply for Service</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <form id="serviceApplicationForm" class="service-form">
                    <div class="form-group">
                        <label for="applicantName">Full Name</label>
                        <input type="text" id="applicantName" required>
                    </div>
                    <div class="form-group">
                        <label for="applicantEmail">Email</label>
                        <input type="email" id="applicantEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="applicantPhone">Phone Number</label>
                        <input type="tel" id="applicantPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="applicantAddress">Address</label>
                        <textarea id="applicantAddress" required></textarea>
                    </div>
                    
                    <!-- Document Upload Section -->
                    <div class="form-group">
                        <label>Upload Required Documents</label>
                        <div class="document-upload" id="documentUploadArea">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>Click to upload or drag and drop documents</p>
                            <p class="small">Supported formats: JPG, PNG, PDF (Max 5MB each)</p>
                            <input type="file" id="documentInput" multiple style="display: none;">
                        </div>
                        <div class="document-preview" id="documentPreview"></div>
                    </div>
                    
                    <!-- Aadhar Card Upload (Specific for some services) -->
                    <div class="form-group" id="aadharUploadGroup" style="display: none;">
                        <label>Upload Aadhar Card (Front & Back)</label>
                        <div class="document-upload" id="aadharFrontUpload">
                            <i class="fas fa-id-card" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>Upload Aadhar Card Front Side</p>
                            <input type="file" id="aadharFrontInput" style="display: none;">
                        </div>
                        <div class="document-upload" id="aadharBackUpload">
                            <i class="fas fa-id-card" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>Upload Aadhar Card Back Side</p>
                            <input type="file" id="aadharBackInput" style="display: none;">
                        </div>
                        <div class="document-preview" id="aadharPreview"></div>
                    </div>
                    
                    <!-- Payment Section (For services requiring payment) -->
                    <div class="payment-section" id="paymentSection" style="display: none;">
                        <h4>Payment Details</h4>
                        <div class="form-group">
                            <label for="paymentAmount">Amount to Pay</label>
                            <input type="text" id="paymentAmount" readonly>
                        </div>
                        <div class="payment-options">
                            <div class="payment-option" data-method="card">
                                <i class="fas fa-credit-card"></i>
                                <p>Credit/Debit Card</p>
                            </div>
                            <div class="payment-option" data-method="netbanking">
                                <i class="fas fa-university"></i>
                                <p>Net Banking</p>
                            </div>
                            <div class="payment-option" data-method="upi">
                                <i class="fas fa-mobile-alt"></i>
                                <p>UPI</p>
                            </div>
                            <div class="payment-option" data-method="wallet">
                                <i class="fas fa-wallet"></i>
                                <p>Wallet</p>
                            </div>
                        </div>
                        
                        <!-- Card Payment Form -->
                        <div class="payment-form" id="cardPaymentForm">
                            <div class="form-group">
                                <label for="cardNumber">Card Number</label>
                                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456">
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div class="form-group">
                                    <label for="expiryDate">Expiry Date</label>
                                    <input type="text" id="expiryDate" placeholder="MM/YY">
                                </div>
                                <div class="form-group">
                                    <label for="cvv">CVV</label>
                                    <input type="text" id="cvv" placeholder="123">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="cardHolder">Card Holder Name</label>
                                <input type="text" id="cardHolder" placeholder="John Doe">
                            </div>
                        </div>
                        
                        <!-- UPI Payment Form -->
                        <div class="payment-form" id="upiPaymentForm">
                            <div class="form-group">
                                <label for="upiId">UPI ID</label>
                                <input type="text" id="upiId" placeholder="yourname@upi">
                            </div>
                        </div>
                        
                        <!-- Net Banking Form -->
                        <div class="payment-form" id="netbankingPaymentForm">
                            <div class="form-group">
                                <label for="bankSelect">Select Bank</label>
                                <select id="bankSelect">
                                    <option value="">Select your bank</option>
                                    <option value="sbi">State Bank of India</option>
                                    <option value="hdfc">HDFC Bank</option>
                                    <option value="icici">ICICI Bank</option>
                                    <option value="axis">Axis Bank</option>
                                    <option value="pnb">Punjab National Bank</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Wallet Payment Form -->
                        <div class="payment-form" id="walletPaymentForm">
                            <div class="form-group">
                                <label for="walletSelect">Select Wallet</label>
                                <select id="walletSelect">
                                    <option value="">Select your wallet</option>
                                    <option value="paytm">Paytm</option>
                                    <option value="phonepe">PhonePe</option>
                                    <option value="gpay">Google Pay</option>
                                    <option value="amazonpay">Amazon Pay</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="walletMobile">Registered Mobile Number</label>
                                <input type="text" id="walletMobile" placeholder="9876543210">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="serviceDetails">Additional Details</label>
                        <textarea id="serviceDetails" placeholder="Any additional information..."></textarea>
                    </div>
                    <button type="submit" class="btn btn-success">Submit Application</button>
                </form>
            </div>
        </div>

        <!-- Chatbot -->
        <div class="chatbot-container">
            <div class="chatbot-toggle" id="chatbotToggle">
                <i class="fas fa-comments"></i>
            </div>
            <div class="chatbot-window" id="chatbotWindow">
                <div class="chatbot-header">
                    <h3>Municipality Assistant</h3>
                    <button id="closeChatbot"><i class="fas fa-times"></i></button>
                </div>
                <div class="chatbot-messages" id="chatbotMessages">
                    <div class="message bot-message">
                        Hello! I'm your municipality assistant. How can I help you today?
                        <div class="quick-replies">
                            <button class="quick-reply" data-query="license apply">License Apply</button>
                            <button class="quick-reply" data-query="documents required">Documents Required</button>
                            <button class="quick-reply" data-query="application status">Application Status</button>
                            <button class="quick-reply" data-query="contact">Contact Info</button>
                        </div>
                    </div>
                </div>
                <div class="chatbot-input">
                    <input type="text" id="chatbotInput" placeholder="Type your message...">
                    <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2023 Municipality Services. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Sample data for the application
        let applications = JSON.parse(localStorage.getItem('applications')) || [];
        let users = JSON.parse(localStorage.getItem('users')) || [
            { id: 1, name: "John Doe", email: "john@example.com", phone: "1234567890", password: "password123", status: "active", applications: 2, role: "user" },
            { id: 2, name: "Admin User", email: "admin@municipality.gov", phone: "1122334455", password: "admin123", status: "active", applications: 0, role: "admin" }
        ];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let applicationIdCounter = parseInt(localStorage.getItem('applicationIdCounter')) || 1001;
        let settings = JSON.parse(localStorage.getItem('settings')) || {
            systemName: "Municipality Services",
            adminEmail: "admin@municipality.gov",
            helpline: "1800-123-4567",
            autoResponse: "Thank you for your application. We have received it and will process it shortly.",
            applicationTimeout: 7
        };

        // Service information with document requirements
        const serviceInfo = {
            "License Application": {
                documents: ["Proof of Identity", "Proof of Address", "Passport Size Photographs"],
                requiresAadhar: true,
                paymentRequired: true,
                amount: 500
            },
            "License Renewal": {
                documents: ["Existing License Copy", "Updated Address Proof (if changed)"],
                requiresAadhar: true,
                paymentRequired: true,
                amount: 300
            },
            "Property Tax": {
                documents: ["Property Ownership Proof", "Previous Tax Receipt"],
                requiresAadhar: false,
                paymentRequired: true,
                amount: 2500
            },
            "Vehicle Registration": {
                documents: ["Address Proof", "ID Proof", "Vehicle Invoice", "Insurance Certificate", "Pollution Certificate"],
                requiresAadhar: true,
                paymentRequired: true,
                amount: 1000
            },
            "Trade License": {
                documents: ["Business Address Proof", "Applicant ID Proof", "Property Tax Receipt", "NOC from Landlord", "Business Incorporation Documents"],
                requiresAadhar: true,
                paymentRequired: true,
                amount: 2000
            },
            "Building Permit": {
                documents: ["Land Ownership Documents", "Building Plans", "Structural Stability Certificate", "NOC from Fire Department"],
                requiresAadhar: true,
                paymentRequired: true,
                amount: 5000
            },
            "Death Certificate": {
                documents: ["Medical Certificate of Cause of Death", "Deceased's ID Proof", "Applicant's ID Proof"],
                requiresAadhar: false,
                paymentRequired: false,
                amount: 0
            },
            "Birth Certificate": {
                documents: ["Hospital Birth Record", "Parent's ID Proof", "Address Proof"],
                requiresAadhar: false,
                paymentRequired: false,
                amount: 0
            }
        };

        // Enhanced chatbot knowledge base
        const chatbotKnowledge = {
            "greeting": [
                "Hello! How can I assist you with municipality services today?",
                "Hi there! I'm here to help with any municipality-related queries.",
                "Welcome! How can I help you with our municipality services?"
            ],
            "license apply": [
                "To apply for a license, go to the Services section and click on 'License Apply'. You'll need to provide personal details, upload required documents (including Aadhar card front and back), and make the payment if applicable.",
                "License application requires: 1) Personal information 2) Address proof 3) Identity proof 4) Aadhar card copies (front & back) 5) Payment of applicable fees. Processing time is typically 7-10 business days."
            ],
            "documents required": [
                "Document requirements vary by service. For licenses, you typically need proof of identity, proof of address, and Aadhar card. For property tax, you need property ownership documents. Check the specific service details for exact requirements.",
                "Common documents needed: Aadhar card, PAN card, proof of address, passport photos. Specific services may require additional documents like property papers, vehicle documents, or business registration certificates."
            ],
            "application status": [
                "You can check your application status in the 'My Applications' section. Each application shows its current status (Submitted, Under Review, Approved, or Rejected).",
                "To track your application: 1) Go to 'My Applications' 2) Find your application in the list 3) Check the status column. If you need more details, contact our helpline."
            ],
            "contact": [
                "Main Helpline: 1800-123-4567 (24/7)<br>Email: contact@municipality.gov<br>Office Hours: Mon-Fri 9AM-5PM, Sat 9AM-1PM",
                "Department Contacts:<br>Licensing: Ext. 101<br>Property Tax: Ext. 102<br>Vehicle Registration: Ext. 103<br>Certificates: Ext. 104<br>General Inquiries: Ext. 100"
            ],
            "default": [
                "I'm here to help with municipality services. You can ask me about license applications, document requirements, application status, or contact information.",
                "I specialize in municipality services. How can I assist you with license applications, document requirements, or general information?",
                "I can help you with application processes, document requirements, status tracking, or contact details. What do you need help with?"
            ]
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    const sectionId = this.getAttribute('data-section');
                    document.getElementById(sectionId).classList.add('active');
                    
                    // Update admin stats when admin section is opened
                    if (sectionId === 'admin') {
                        updateAdminStats();
                        updateAdminApplicationsTable();
                        updateAdminUsersTable();
                    }
                    
                    // Update applications list when applications section is opened
                    if (sectionId === 'applications') {
                        updateApplicationsList();
                    }
                });
            });

            // Admin navigation
            document.querySelectorAll('.admin-nav').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.admin-nav').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.admin-tab').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`admin-${tabId}`).classList.add('active');
                });
            });

            // Service cards functionality
            document.querySelectorAll('.service-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    // Toggle service details
                    if (!e.target.classList.contains('btn-apply') && !e.target.classList.contains('btn-info')) {
                        this.classList.toggle('active');
                    }
                });
            });

            // Service application buttons
            document.querySelectorAll('.btn-apply').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const service = this.getAttribute('data-service');
                    openServiceModal(service);
                });
            });

            // Service info buttons
            document.querySelectorAll('.btn-info').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const service = this.getAttribute('data-service');
                    showNotification(`More information about ${service} is available in the service details.`, 'info');
                });
            });

            // Service modal functionality
            document.querySelector('.close-modal').addEventListener('click', function() {
                document.getElementById('serviceModal').style.display = 'none';
            });

            // Document upload functionality
            document.getElementById('documentUploadArea').addEventListener('click', function() {
                document.getElementById('documentInput').click();
            });

            document.getElementById('documentInput').addEventListener('change', function(e) {
                handleDocumentUpload(e, 'documentPreview');
            });

            // Aadhar upload functionality
            document.getElementById('aadharFrontUpload').addEventListener('click', function() {
                document.getElementById('aadharFrontInput').click();
            });

            document.getElementById('aadharBackUpload').addEventListener('click', function() {
                document.getElementById('aadharBackInput').click();
            });

            document.getElementById('aadharFrontInput').addEventListener('change', function(e) {
                handleDocumentUpload(e, 'aadharPreview', 'Aadhar Front');
            });

            document.getElementById('aadharBackInput').addEventListener('change', function(e) {
                handleDocumentUpload(e, 'aadharPreview', 'Aadhar Back');
            });

            // Payment option selection
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const method = this.getAttribute('data-method');
                    document.querySelectorAll('.payment-form').forEach(form => form.classList.remove('active'));
                    document.getElementById(`${method}PaymentForm`).classList.add('active');
                });
            });

            // Service application form
            document.getElementById('serviceApplicationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentUser) {
                    showNotification('Please login to apply for services.', 'error');
                    return;
                }
                
                const service = document.getElementById('modalServiceTitle').textContent.replace('Apply for ', '');
                const serviceData = serviceInfo[service];
                
                // Check if payment is required and if payment method is selected
                if (serviceData.paymentRequired) {
                    const selectedPayment = document.querySelector('.payment-option.selected');
                    if (!selectedPayment) {
                        showNotification('Please select a payment method.', 'error');
                        return;
                    }
                }
                
                const application = {
                    id: applicationIdCounter++,
                    service: service,
                    applicantName: document.getElementById('applicantName').value,
                    applicantEmail: document.getElementById('applicantEmail').value,
                    applicantPhone: document.getElementById('applicantPhone').value,
                    applicantAddress: document.getElementById('applicantAddress').value,
                    additionalDetails: document.getElementById('serviceDetails').value,
                    date: new Date().toISOString().split('T')[0],
                    status: 'submitted',
                    userId: currentUser.id,
                    documents: [],
                    payment: serviceData.paymentRequired ? {
                        amount: serviceData.amount,
                        method: document.querySelector('.payment-option.selected')?.getAttribute('data-method') || 'none',
                        status: 'pending'
                    } : null
                };
                
                applications.push(application);
                saveData();
                
                document.getElementById('serviceModal').style.display = 'none';
                showNotification(`Application for ${service} submitted successfully! Your application ID is: ${application.id}`, 'success');
                this.reset();
                
                // Clear document previews
                document.getElementById('documentPreview').innerHTML = '';
                document.getElementById('aadharPreview').innerHTML = '';
                
                // Update admin stats
                updateAdminStats();
                updateAdminApplicationsTable();
                updateApplicationsList();
            });

            // Admin functionality
            document.getElementById('refreshApplications').addEventListener('click', function() {
                updateAdminApplicationsTable();
                showNotification('Applications list refreshed.', 'info');
            });

            document.getElementById('exportApplications').addEventListener('click', function() {
                showNotification('Applications data exported successfully.', 'success');
            });

            document.getElementById('filterApplications').addEventListener('click', function() {
                showNotification('Filter options will be displayed here.', 'info');
            });

            document.getElementById('refreshUsers').addEventListener('click', function() {
                updateAdminUsersTable();
                showNotification('Users list refreshed.', 'info');
            });

            document.getElementById('addUser').addEventListener('click', function() {
                const name = prompt('Enter user full name:');
                const email = prompt('Enter user email:');
                const phone = prompt('Enter user phone:');
                const role = prompt('Enter user role (user/admin):', 'user');
                
                if (name && email && phone && role) {
                    const newUser = {
                        id: users.length + 1,
                        name: name,
                        email: email,
                        phone: phone,
                        password: 'default123',
                        status: 'active',
                        applications: 0,
                        role: role
                    };
                    
                    users.push(newUser);
                    saveData();
                    updateAdminUsersTable();
                    updateAdminStats();
                    showNotification(`User ${name} added successfully.`, 'success');
                }
            });

            document.getElementById('exportUsers').addEventListener('click', function() {
                showNotification('Users data exported successfully.', 'success');
            });

            document.getElementById('generateReport').addEventListener('click', function() {
                showNotification('Report generated successfully.', 'success');
            });

            document.getElementById('downloadReport').addEventListener('click', function() {
                showNotification('Report downloaded successfully.', 'success');
            });

            // Admin settings form
            document.getElementById('adminSettingsForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                settings.systemName = document.getElementById('systemName').value;
                settings.adminEmail = document.getElementById('adminEmail').value;
                settings.helpline = document.getElementById('helpline').value;
                settings.autoResponse = document.getElementById('autoResponse').value;
                settings.applicationTimeout = document.getElementById('applicationTimeout').value;
                
                localStorage.setItem('settings', JSON.stringify(settings));
                showNotification('Settings saved successfully.', 'success');
            });

            // Load settings
            document.getElementById('systemName').value = settings.systemName;
            document.getElementById('adminEmail').value = settings.adminEmail;
            document.getElementById('helpline').value = settings.helpline;
            document.getElementById('autoResponse').value = settings.autoResponse;
            document.getElementById('applicationTimeout').value = settings.applicationTimeout;

            // Chatbot functionality
            document.getElementById('chatbotToggle').addEventListener('click', function() {
                document.getElementById('chatbotWindow').style.display = 'flex';
            });

            document.getElementById('closeChatbot').addEventListener('click', function() {
                document.getElementById('chatbotWindow').style.display = 'none';
            });

            document.getElementById('sendMessage').addEventListener('click', sendMessage);
            document.getElementById('chatbotInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Quick reply buttons
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('quick-reply')) {
                    const query = e.target.getAttribute('data-query');
                    document.getElementById('chatbotInput').value = query;
                    sendMessage();
                }
            });

            function sendMessage() {
                const input = document.getElementById('chatbotInput');
                const message = input.value.trim();
                
                if (message) {
                    // Add user message
                    addMessage(message, 'user');
                    input.value = '';
                    
                    // Generate bot response
                    setTimeout(() => {
                        const response = generateBotResponse(message);
                        addMessage(response, 'bot');
                    }, 500);
                }
            }

            function addMessage(text, sender) {
                const messagesContainer = document.getElementById('chatbotMessages');
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', `${sender}-message`);
                
                if (sender === 'bot' && text.includes('<br>')) {
                    // For bot messages with line breaks
                    messageElement.innerHTML = text;
                    
                    // Add quick replies for certain responses
                    if (text.includes('How can I assist you') || text.includes('What do you need help with')) {
                        const quickReplies = document.createElement('div');
                        quickReplies.className = 'quick-replies';
                        quickReplies.innerHTML = `
                            <button class="quick-reply" data-query="license apply">License Apply</button>
                            <button class="quick-reply" data-query="documents required">Documents Required</button>
                            <button class="quick-reply" data-query="application status">Application Status</button>
                            <button class="quick-reply" data-query="contact">Contact Info</button>
                        `;
                        messageElement.appendChild(quickReplies);
                    }
                } else {
                    messageElement.textContent = text;
                }
                
                messagesContainer.appendChild(messageElement);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }

            function generateBotResponse(message) {
                const lowerMessage = message.toLowerCase();
                
                // Check for specific categories and keywords
                if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                    return getRandomResponse('greeting');
                } else if (lowerMessage.includes('license') && lowerMessage.includes('apply')) {
                    return getRandomResponse('license apply');
                } else if (lowerMessage.includes('document') && lowerMessage.includes('required')) {
                    return getRandomResponse('documents required');
                } else if (lowerMessage.includes('application') && lowerMessage.includes('status')) {
                    return getRandomResponse('application status');
                } else if (lowerMessage.includes('contact') || lowerMessage.includes('number') || lowerMessage.includes('phone') || lowerMessage.includes('email')) {
                    return getRandomResponse('contact');
                } else {
                    return getRandomResponse('default');
                }
            }

            function getRandomResponse(category) {
                const responses = chatbotKnowledge[category];
                return responses[Math.floor(Math.random() * responses.length)];
            }

            function openServiceModal(service) {
                document.getElementById('modalServiceTitle').textContent = `Apply for ${service}`;
                document.getElementById('serviceModal').style.display = 'flex';
                
                // Get service information
                const serviceData = serviceInfo[service];
                
                // Show/hide Aadhar upload section based on service requirements
                if (serviceData.requiresAadhar) {
                    document.getElementById('aadharUploadGroup').style.display = 'block';
                } else {
                    document.getElementById('aadharUploadGroup').style.display = 'none';
                }
                
                // Show/hide payment section based on service requirements
                if (serviceData.paymentRequired) {
                    document.getElementById('paymentSection').style.display = 'block';
                    document.getElementById('paymentAmount').value = `â‚¹${serviceData.amount}`;
                } else {
                    document.getElementById('paymentSection').style.display = 'none';
                }
                
                // Reset payment forms
                document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
                document.querySelectorAll('.payment-form').forEach(form => form.classList.remove('active'));
                
                // Pre-fill form if user is logged in
                if (currentUser) {
                    document.getElementById('applicantName').value = currentUser.name;
                    document.getElementById('applicantEmail').value = currentUser.email;
                    document.getElementById('applicantPhone').value = currentUser.phone;
                }
            }

            function handleDocumentUpload(event, previewId, label = 'Document') {
                const files = event.target.files;
                const previewContainer = document.getElementById(previewId);
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    
                    // Validate file type and size
                    if (!file.type.match('image.*') && !file.type.match('application/pdf')) {
                        showNotification('Please upload only images or PDF files.', 'error');
                        continue;
                    }
                    
                    if (file.size > 5 * 1024 * 1024) {
                        showNotification('File size should be less than 5MB.', 'error');
                        continue;
                    }
                    
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const documentItem = document.createElement('div');
                        documentItem.className = 'document-item';
                        
                        if (file.type.match('image.*')) {
                            documentItem.innerHTML = `
                                <img src="${e.target.result}" alt="${label}">
                                <button class="remove-btn">&times;</button>
                            `;
                        } else {
                            documentItem.innerHTML = `
                                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                                    <i class="fas fa-file-pdf" style="font-size: 2rem; color: #e74c3c;"></i>
                                    <p style="margin-top: 5px; font-size: 0.8rem;">${file.name}</p>
                                </div>
                                <button class="remove-btn">&times;</button>
                            `;
                        }
                        
                        // Add remove functionality
                        documentItem.querySelector('.remove-btn').addEventListener('click', function() {
                            documentItem.remove();
                        });
                        
                        previewContainer.appendChild(documentItem);
                    };
                    
                    reader.readAsDataURL(file);
                }
                
                // Reset the file input
                event.target.value = '';
            }

            // Login functionality
            document.getElementById('loginBtn').addEventListener('click', function() {
                if (currentUser) {
                    // Logout
                    currentUser = null;
                    localStorage.removeItem('currentUser');
                    this.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
                    updateApplicationsList();
                    showNotification('You have been logged out.', 'info');
                } else {
                    // Simple login for demo - in real app, this would be more secure
                    const email = prompt('Enter your email:');
                    if (email) {
                        let user = users.find(u => u.email === email);
                        if (user) {
                            const password = prompt('Enter your password:');
                            if (password === user.password) {
                                currentUser = user;
                                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                                this.innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
                                showNotification(`Welcome back, ${user.name}!`, 'success');
                                updateApplicationsList();
                                updateUIForUser();
                            } else {
                                showNotification('Invalid password.', 'error');
                            }
                        } else {
                            // Auto-register if user doesn't exist
                            const name = prompt('New user detected. Enter your full name:');
                            const phone = prompt('Enter your phone number:');
                            const password = prompt('Create a password:');
                            
                            if (name && phone && password) {
                                const newUser = {
                                    id: users.length + 1,
                                    name: name,
                                    email: email,
                                    phone: phone,
                                    password: password,
                                    status: 'active',
                                    applications: 0,
                                    role: 'user'
                                };
                                
                                users.push(newUser);
                                currentUser = newUser;
                                saveData();
                                
                                this.innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
                                showNotification(`Registration successful! Welcome, ${name}.`, 'success');
                                updateApplicationsList();
                                updateUIForUser();
                            }
                        }
                    }
                }
            });

            // Initialize UI
            updateApplicationsList();
            updateStats();
            updateUIForUser();
            updateAdminStats();
            updateAdminApplicationsTable();
            updateAdminUsersTable();
        });

        // Data management functions
        function saveData() {
            localStorage.setItem('applications', JSON.stringify(applications));
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('applicationIdCounter', applicationIdCounter.toString());
            localStorage.setItem('settings', JSON.stringify(settings));
            if (currentUser) {
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        }

        function updateApplicationsList() {
            const applicationsList = document.getElementById('applicationsList');
            applicationsList.innerHTML = '';
            
            let userApplications = applications;
            if (currentUser && currentUser.role === 'user') {
                userApplications = applications.filter(a => a.userId === currentUser.id);
            }
            
            if (userApplications.length === 0) {
                applicationsList.innerHTML = '<p>No applications found. ' + (currentUser ? '<a href="#" class="nav-link" data-section="services">Apply for a service</a>' : 'Please login to view applications.') + '</p>';
                return;
            }
            
            userApplications.forEach(application => {
                const applicationItem = document.createElement('div');
                applicationItem.className = 'service-card';
                
                const statusClass = `status-${application.status.replace(' ', '-')}`;
                
                applicationItem.innerHTML = `
                    <div class="application-info">
                        <h3>${application.service} (ID: ${application.id})</h3>
                        <p>Applied on: ${application.date}</p>
                        <div class="application-meta">
                            <span><i class="fas fa-calendar"></i> ${application.date}</span>
                            <span><i class="fas fa-user"></i> ${application.applicantName}</span>
                            ${application.payment ? `<span><i class="fas fa-money-bill-wave"></i> â‚¹${application.payment.amount}</span>` : ''}
                        </div>
                    </div>
                    <div class="application-status">
                        <span class="status ${statusClass}">${application.status}</span>
                    </div>
                `;
                
                applicationsList.appendChild(applicationItem);
            });
        }

        function updateStats() {
            document.getElementById('total-applications').textContent = applications.length;
            document.getElementById('approved-applications').textContent = applications.filter(a => a.status === 'approved').length;
            document.getElementById('active-users').textContent = users.filter(u => u.status === 'active').length;
            document.getElementById('avg-processing').textContent = '3.5';
        }

        function updateAdminStats() {
            document.getElementById('admin-total-applications').textContent = applications.length;
            document.getElementById('admin-approved-applications').textContent = applications.filter(a => a.status === 'approved').length;
            document.getElementById('admin-pending-applications').textContent = applications.filter(a => a.status === 'submitted').length;
            document.getElementById('admin-total-users').textContent = users.length;
            
            const totalRevenue = applications
                .filter(a => a.payment)
                .reduce((sum, app) => sum + app.payment.amount, 0);
            document.getElementById('admin-revenue').textContent = `â‚¹${totalRevenue}`;
            
            const approvalRate = applications.length > 0 ? 
                Math.round((applications.filter(a => a.status === 'approved').length / applications.length) * 100) : 0;
            document.getElementById('admin-approval-rate').textContent = `${approvalRate}%`;
            
            // Update report stats
            document.getElementById('report-applications-by-service').textContent = new Set(applications.map(a => a.service)).size;
            document.getElementById('report-this-month').textContent = applications.filter(a => {
                const applicationDate = new Date(a.date);
                const now = new Date();
                return applicationDate.getMonth() === now.getMonth() && applicationDate.getFullYear() === now.getFullYear();
            }).length;
            document.getElementById('report-avg-processing').textContent = '3.5';
        }

        function updateAdminApplicationsTable() {
            const tableBody = document.getElementById('adminApplicationsTable');
            tableBody.innerHTML = '';
            
            if (applications.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" style="text-align: center;">No applications found.</td></tr>';
                return;
            }
            
            applications.forEach(application => {
                const row = document.createElement('tr');
                
                const statusClass = `status-${application.status.replace(' ', '-')}`;
                
                row.innerHTML = `
                    <td>${application.id}</td>
                    <td>${application.applicantName}</td>
                    <td>${application.service}</td>
                    <td>${application.date}</td>
                    <td><span class="status ${statusClass}">${application.status}</span></td>
                    <td class="action-buttons">
                        <button class="action-btn view-btn" data-id="${application.id}"><i class="fas fa-eye"></i></button>
                        <button class="action-btn edit-btn" data-id="${application.id}"><i class="fas fa-edit"></i></button>
                        <button class="action-btn resolve-btn" data-id="${application.id}"><i class="fas fa-check"></i></button>
                        <button class="action-btn delete-btn" data-id="${application.id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Add event listeners for action buttons
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    viewApplication(id);
                });
            });
            
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    editApplication(id);
                });
            });
            
            document.querySelectorAll('.resolve-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    approveApplication(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    deleteApplication(id);
                });
            });
        }

        function updateAdminUsersTable() {
            const tableBody = document.getElementById('adminUsersTable');
            tableBody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone}</td>
                    <td>${user.role}</td>
                    <td><span class="status status-${user.status}">${user.status}</span></td>
                    <td>${user.applications || 0}</td>
                    <td class="action-buttons">
                        <button class="action-btn view-btn" data-id="${user.id}"><i class="fas fa-eye"></i></button>
                        <button class="action-btn edit-btn" data-id="${user.id}"><i class="fas fa-edit"></i></button>
                        <button class="action-btn delete-btn" data-id="${user.id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Add event listeners for action buttons
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    viewUser(id);
                });
            });
            
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    editUser(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    deleteUser(id);
                });
            });
        }

        function updateUIForUser() {
            if (currentUser) {
                document.getElementById('loginBtn').innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
                
                // Show admin panel only for admin users
                if (currentUser.role === 'admin') {
                    document.querySelector('[data-section="admin"]').style.display = 'list-item';
                } else {
                    document.querySelector('[data-section="admin"]').style.display = 'none';
                }
            } else {
                document.getElementById('loginBtn').innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
                document.querySelector('[data-section="admin"]').style.display = 'none';
            }
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Admin application management functions
        function viewApplication(id) {
            const application = applications.find(a => a.id === id);
            if (application) {
                showNotification(`Viewing application: ${application.service} (ID: ${application.id})`, 'info');
            }
        }

        function editApplication(id) {
            const application = applications.find(a => a.id === id);
            if (application) {
                const newStatus = prompt('Enter new status (submitted, under review, approved, rejected):', application.status);
                if (newStatus && ['submitted', 'under review', 'approved', 'rejected'].includes(newStatus.toLowerCase())) {
                    application.status = newStatus.toLowerCase();
                    saveData();
                    updateApplicationsList();
                    updateAdminApplicationsTable();
                    updateStats();
                    updateAdminStats();
                    showNotification('Application status updated successfully!', 'success');
                }
            }
        }

        function approveApplication(id) {
            const application = applications.find(a => a.id === id);
            if (application) {
                application.status = 'approved';
                if (application.payment) {
                    application.payment.status = 'paid';
                }
                saveData();
                updateApplicationsList();
                updateAdminApplicationsTable();
                updateStats();
                updateAdminStats();
                showNotification('Application approved successfully!', 'success');
            }
        }

        function deleteApplication(id) {
            if (confirm('Are you sure you want to delete this application?')) {
                applications = applications.filter(a => a.id !== id);
                saveData();
                updateApplicationsList();
                updateAdminApplicationsTable();
                updateStats();
                updateAdminStats();
                showNotification('Application deleted successfully!', 'success');
            }
        }

        function viewUser(id) {
            const user = users.find(u => u.id === id);
            if (user) {
                showNotification(`Viewing user: ${user.name} (ID: ${user.id})`, 'info');
            }
        }

        function editUser(id) {
            const user = users.find(u => u.id === id);
            if (user) {
                const newStatus = prompt('Enter new status (active, inactive):', user.status);
                if (newStatus && ['active', 'inactive'].includes(newStatus.toLowerCase())) {
                    user.status = newStatus.toLowerCase();
                    saveData();
                    updateAdminUsersTable();
                    updateAdminStats();
                    showNotification('User status updated successfully!', 'success');
                }
            }
        }

        function deleteUser(id) {
            if (id === currentUser.id) {
                showNotification('You cannot delete your own account.', 'error');
                return;
            }
            
            if (confirm('Are you sure you want to delete this user?')) {
                users = users.filter(u => u.id !== id);
                saveData();
                updateAdminUsersTable();
                updateAdminStats();
                showNotification('User deleted successfully!', 'success');
            }
        }
    </script>
</body>
</html>
